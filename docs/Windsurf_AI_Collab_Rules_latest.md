# Windsurf: AI 協調開発ルール (SSOT / latest)

> **重要E*: 本ファイルは Windsurf 環墁Eおける協調開発の単一正本EESOTEです、E 
> すべての AI エージェントおよE人間オペレータは、本ルールを最優先で遵守してください、E
---

## 変更サマリーEE1.1 ↁEv2.0EE
- ✁E**実行フローの完E明確匁E*: 吁EチEプで「E動実衁Eor 征E」を明示
- ✁E**クリーンアチEEの義務化**: PR作E前E忁EチェチEリストを追加
- ✁E**簡易化**: Tier刁Eを簡素化し、判断の曖昧性を排除
- ✁E**自動Eージの確実性**: CI成功 ↁE即座に自動Eージの単純フロー
- ✁E**中断禁止ゾーン**: PR作EからマEジまで人間E介Eを不要に

---

## 0. 起動シーケンス

### AIの起動時動作（毎回忁E実行！E
1. **AI_CONTEXT.md の読み込み**: プロジェクトルートE `AI_CONTEXT.md` を最初に読む
2. **オーケストレーション用プロンプトE任意）E読み込み**: プロジェクトルートE `ORCHESTRATION_PROMPT.md` を運用してぁE場合E読むEテンプレ: `templates/ORCHESTRATION_PROMPT.md`EE3. **ミッション確誁E*: 現在のミッションと進捗を把握
4. **継綁Eor 新規判宁E*: 継続作業なら中断可能点から再開、新規ならIssue作Eから開姁E
### AI_CONTEXT.md が存在しなぁE吁E
- 付録AのチEプレートに従って自動生成！Eier 1操作！E- プロジェクトルートに配置し、E期状態を記録

---

## 1. 基本原則

### 1.1 作業の起点

- **すべての作業はIssueから開姁E*: 抽象皁E要求もIssueに変換
- **AI自律Issue起票**: AIはコードE析E封E提案に基づきIssueをE律的に作E可能

### 1.2 応答言誁E
- **すべての応答E日本誁E*: ドキュメント、コミットメチEージ、PR本斁Eべて日本誁E
### 1.3 タスク駁E開発

- 大頁E/中頁E/小頁Eに刁E
- 進捗を `AI_CONTEXT.md` に記録
- 区刁Eごとにコミットし、E有が忁Eな場合EプッシュするE外部通信のため忁Eに応じて承認！E
### 1.4 コマンド実行EリシーE高速化EE
- **原則**: AI は作業を止めずに進めるため、ローカルで安EなコマンドE自律実行してよい
  - 侁E 読み取り/検索/差刁E誁E静的解极EチEチEビルチEフォーマット（EロジェクトEに閉じる篁EEE- **例夁E*: 以下に該当する場合E事前承認を取る
  - **外部通信**E侁E `git fetch/pull/push`、パチEージ取得、外部API呼び出し！E  - **破壊的/復旧困難な操佁E*E侁E 削除、強制上書き、`reset`、`rebase`、`force push`EE  - **依存関係E追加/更新**E侁E `npm install`、`pip install`EE  - **長時間/高負荷/大量E力が見込まれる操佁E*E目宁E 数刁E上、またE大量ログEE
#### 運用オプション: GitHub操作を自動承認すめE
プロジェクチE絁EE運用として「普段から push・PR作E・マEジまで自動承認」する場合E、外部通信EEgit fetch/pull/push` 等）や GitHub 操作につぁE **承認征Eで停止しなぁE* 運用にしてよい:

- 条件: 実行環墁Eツール設宁ECI権陁EルールEEで、GitHub操作E自動承認が有効になってぁE
- こE場合E扱ぁE `git fetch/pull/push` めEPR作E/マEジ等E、EE度の確認を省略して自律実行してよい
- ただし、`force push` / `rebase` / `reset` のような履歴破壊E復旧困難な操作E、引き続き慎重に扱ぁE忁Eなら方針確認を取る

#### ダブルチェチEE忁E！E 失敗E取りこぼしEスタチE・虚偽完亁EE防止

以下E **効玁Eり正確性を優允E*し、毎回忁E実施する、E
- **終亁E定EダブルチェチE**:
  - コマンド実行後E、忁E「終亁Eた」ことを確認してから次に進む、E  - 征Eが忁Eな場合E、忁E **タイムアウト（上限時間EE* と **打ち刁E条件** を定義し、趁Eしたら「タイムアウト」と明言して次の手を出す、E- **成功判定EダブルチェチE**:
  - 成功判定E忁E **2段隁E* で行う:
    - 1) 実行結果Eエラー表示/靁E終亁E拒否/競吁Eタイムアウト等！E    - 2) 目皁E態E確認！Eit状慁E生E物/ログ等！E  - 失敗が表示された場合E、その場で「失敗」と明言し、根拠と次の対応を提示する、E- **成果物のダブルチェチE**:
  - 実裁EE修正・運用タスクは「E果物が確認できる」ことを完亁E件に含める、E  - **「実裁E亁EE禁止条件**: 実際の差刁E動作確認が提示できなぁE合E完亁Eして扱わず「未完亁Eと明言する、E
---

## 2. 簡素化されたTier刁EE
### Tier 1E完E自律！E- ドキュメント更新、スタイル修正、軽微なチEト修正、AI_CONTEXT.md 更新、E
### Tier 2EE動PR→CI→E動EージEE- 機E実裁Eバグ修正、リファクタリング、新規テスト追加、E- **実行ルール**: 実裁EↁEクリーンアチEEチェチE ↁEPR自動作E ↁECI成功 ↁE**即座に自動Eージ**、E
### Tier 3E人間承認忁E！E- 本番DB変更、本番チEEロイ、セキュリチE設定、major バEジョンアチEE、E
---

## 3. 忁EフローEEier 2の標準！E
### Step 4: クリーンアチEEチェチEEE重要EEE**PR作E前に忁E実行する義務的チェチEリスチE*:
- [ ] チEチE出力！Eonsole.log等）E削除
- [ ] 不要なコメントアウト、未使用の変数/importの削除
- [ ] TODO/FIXMEの対応またEIssue匁E- [ ] 不要な空行E整琁E
---

## 4. AI_CONTEXT.md 運用

- **配置**: プロジェクトルート直下、E- **更新**: 作業開始時、作業の区刁E、完亁Eに忁E更新、E- **フィールチE*: 最終更新、ミチEョン、E捗、次の中断可能点、決定事頁EBacklog、E
---

## 5. 履歴と互換性

- 本ルールは v2.0 をEースとした統合正本です、E- 旧バEジョンEE1.1, v2.0EE履歴参E用として `docs/` 配下に保持されますが、AI は常に本ファイルEEatestEを参Eしてください、E
---

**こEドキュメントE `YuShimoji/shared-workflows` リポジトリで管琁EれてぁEす、E*
